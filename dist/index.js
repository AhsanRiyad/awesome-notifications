!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AWN=e():t.AWN=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.r(e);var r={labels:{tip:"Tip",info:"Info",success:"Success",warning:"Attention",alert:"Error",async:"Loading",confirm:"Confirmation required",confirmOk:"OK",confirmCancel:"Cancel"},icons:{tip:"question-circle",info:"info-circle",success:"check-circle",warning:"exclamation-circle",alert:"exclamation-triangle",async:"cog fa-spin",confirm:"exclamation-triangle",prefix:"<i class='fa fas fa-fw fa-",suffix:"'></i>",enabled:!0},replacements:{tip:"",info:"",success:"",warning:"",alert:"",async:"","async-block":"",modal:"",confirm:"",general:{"<script>":"","<\/script>":""}},messages:{async:"Please, wait...","async-block":"Loading"},formatError:function(t){return t.response?t.response.data?t.response.data.errors?t.response.data.errors.map(function(t){return t.detail}).join("<br>"):"".concat(t.response.status," ").concat(t.response.statusText,": ").concat(t.response.data):"500 API Server Error":t.message?t.message:t},maxNotifications:10,animationDuration:300,asyncBlockMinDuration:500,position:"bottom-right",durations:{global:5e3,success:null,info:null,tip:null,warning:null,alert:null}},a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.override(e,r)}var e,n,a;return e=t,(n=[{key:"icon",value:function(t){return this.icons.enabled?"".concat(this.icons.prefix).concat(this.icons[t]).concat(this.icons.suffix):""}},{key:"label",value:function(t){return this.labels[t]}},{key:"duration",value:function(t){var e=this.durations[t];return null===e?this.durations.global:e}},{key:"getSecs",value:function(t){return"".concat(t/1e3,"s")}},{key:"applyReplacements",value:function(t,e){if(!t)return this.messages[e]||"";for(var n in this.replacements.general)t=t.replace(n,this.replacements.general[n]);if(this.replacements[e])for(var o in this.replacements[e])t=t.replace(o,this.replacements[e][o]);return t}},{key:"override",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return t&&Object.assign(this,this.defaultsDeep(e,t)),this}},{key:"defaultsDeep",value:function(t,e){var n={};for(var i in t)e.hasOwnProperty(i)?n[i]="object"===o(t[i])&&null!==t[i]?this.defaultsDeep(t[i],e[i]):e[i]:n[i]=t[i];return n}}])&&i(e.prototype,n),a&&i(e,a),t}(),c={modal:"".concat("awn","-modal"),toast:"".concat("awn","-toast"),btn:"".concat("awn","-btn"),confirm:"".concat("awn","-confirm")},s={prefix:c.toast,klass:{label:"".concat(c.toast,"-label"),content:"".concat(c.toast,"-content"),icon:"".concat(c.toast,"-icon"),progressBar:"".concat(c.toast,"-progress-bar"),progressBarPause:"".concat(c.toast,"-progress-bar-paused")},ids:{container:"".concat(c.toast,"-container")}},l={prefix:c.modal,klass:{buttons:"".concat("awn","-buttons"),button:c.btn,successBtn:"".concat(c.btn,"-success"),cancelBtn:"".concat(c.btn,"-cancel"),title:"".concat(c.modal,"-title"),body:"".concat(c.modal,"-body"),content:"".concat(c.modal,"-content"),dotAnimation:"".concat(c.modal,"-loading-dots")},ids:{wrapper:"".concat(c.modal,"-wrapper"),confirmOk:"".concat(c.confirm,"-ok"),confirmCancel:"".concat(c.confirm,"-cancel")}},u={klass:{hiding:"".concat("awn","-hiding")},lib:"awn"};function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var d=function(){function t(e,n,o,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"div";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.newNode=document.createElement(a),n&&(this.newNode.id=n),o&&(this.newNode.className=o),r&&(this.newNode.innerHTML=r),i&&(this.newNode.style.cssText=i),this.parent=e,this.options={}}var e,n,o;return e=t,(n=[{key:"fire",value:function(t){return t?t.replace(this.newNode,this.type):this.insert()}},{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"insert",value:function(){this.beforeInsert(),this.el=this.parent.appendChild(this.newNode),this.afterInsert()}},{key:"replace",value:function(t,e){var n=this;if(this.getElement())return this.beforeDelete().then(function(){n.type=e,n.parent.replaceChild(t,n.el),n.el=document.getElementById(t.id),n.afterInsert()})}},{key:"beforeDelete",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;return new Promise(function(n,o){e.classList.add(u.klass.hiding),setTimeout(n,t.options.animationDuration||300)})}},{key:"delete",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;return this.getElement(e)?this.beforeDelete(e).then(function(){return t.parent.removeChild(e)}):null}},{key:"getElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;return document.getElementById(t.id)}},{key:"addEvent",value:function(t,e){this.el.addEventListener(t,e)}},{key:"addClass",value:function(t){this.el.classList.add(t)}},{key:"removeClass",value:function(t){this.el.classList.remove(t)}}])&&f(e.prototype,n),o&&f(e,o),t}();function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var p=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.callback=e,this.remaining=n,this.resume()}var e,n,o;return e=t,(n=[{key:"pause",value:function(){window.clearTimeout(this.timerId),this.remaining-=new Date-this.start}},{key:"resume",value:function(){var t=this;this.start=new Date,window.clearTimeout(this.timerId),this.timerId=window.setTimeout(function(){window.clearTimeout(t.timerId),t.callback()},this.remaining)}}])&&h(e.prototype,n),o&&h(e,o),t}();function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function m(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var k=function(t){function e(t,n,o,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=m(this,b(e).call(this,i,"".concat(s.prefix,"-").concat(Math.floor(Date.now()-100*Math.random())),"".concat(s.prefix," ").concat(s.prefix,"-").concat(n),"animation-duration: ".concat(o.getSecs(o.animationDuration),";")))).options=o,r.type=n,r.setInnerHtml(t),r}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,d),n=e,(o=[{key:"setInnerHtml",value:function(t){t=this.options.applyReplacements(t,this.type);var e="",n=this.options.duration(this.type);n>0&&"async"!==this.type&&(e="<div class='".concat(s.klass.progressBar,"' style=\"animation-duration:").concat(this.options.getSecs(n),';"></div>')),this.newNode.innerHTML="\n    ".concat(e,"\n    ").concat(this.getLabel(),'\n    <div class="').concat(s.klass.content,'">').concat(t,'</div>\n    <span class="').concat(s.klass.icon,'">').concat(this.options.icon(this.type),"</span>\n    ")}},{key:"beforeInsert",value:function(){var t=this;if(this.parent.childElementCount>=this.options.maxNotifications){var e=Array.from(this.parent.getElementsByClassName(s.prefix));this.delete(e.find(function(e){return!t.isDeleted(e)}))}}},{key:"afterInsert",value:function(){var t=this;if("async"!=this.type){this.addEvent("click",function(){return t.delete()});var e=this.options.duration(this.type);e>0&&(this.timer=new p(function(){return t.delete()},e),this.addEvent("mouseenter",function(){t.isDeleted()||(t.addClass(s.klass.progressBarPause),t.timer&&t.timer.pause())}),this.addEvent("mouseleave",function(){t.isDeleted()||(t.removeClass(s.klass.progressBarPause),t.timer.resume())}))}}},{key:"isDeleted",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el).classList.contains(u.klass.hiding)}},{key:"getLabel",value:function(){return'<b class="'.concat(s.klass.label,'">').concat(this.options.label(this.type),"</b>")}}])&&v(n.prototype,o),i&&v(n,i),e}();function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function O(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=function(t){function e(t,n,o){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r="animation-duration: ".concat(o.getSecs(o.animationDuration),";");return(i=O(this,j(e).call(this,document.body,l.ids.wrapper,null,r))).options=o,i.type=n,i.setInnerHtml(t),i.insert(),i}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,d),n=e,(o=[{key:"setInnerHtml",value:function(t){var e=this.options.applyReplacements(t,this.type);switch(this.type){case"confirm":e="".concat(this.options.icon(this.type),"\n                    <div class='").concat(l.klass.title,"'>\n                      ").concat(this.options.label(this.type),'\n                    </div>\n                    <div class="').concat(l.klass.content,'">').concat(e,"</div>\n                    <div class='").concat(l.klass.buttons,"'>\n                      <button class='").concat(l.klass.button," ").concat(l.klass.successBtn,"'\n                              id='").concat(l.ids.confirmOk,"'>\n                        ").concat(this.options.labels.confirmOk,"\n                      </button>\n                      <button class='").concat(l.klass.button," ").concat(l.klass.cancelBtn,"'\n                              id='").concat(l.ids.confirmCancel,"'>\n                        ").concat(this.options.labels.confirmCancel,"\n                      </button>\n                    </div>");break;case"async-block":e="".concat(e,'<div class="').concat(l.klass.dotAnimation,'"></div>')}this.newNode.innerHTML='<div class="'.concat(l.klass.body," ").concat(l.prefix,"-").concat(this.type,'">\n                                ').concat(e,"\n                              </div>")}},{key:"hide",value:function(t){var e=this,n=Date.now()-t;return new Promise(function(t){if(n>=e.options.asyncBlockMinDuration)return t(e.delete());setTimeout(function(){return t(e.delete())},e.options.asyncBlockMinDuration-n)})}}])&&_(n.prototype,o),i&&_(n,i),e}();function P(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.d(e,"default",function(){return S});var S=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=new a(e)}var e,n,o;return e=t,(n=[{key:"tip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._required("html"),e=arguments.length>1?arguments[1]:void 0;this.notify(t,"tip",e)}},{key:"info",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._required("html"),e=arguments.length>1?arguments[1]:void 0;this.notify(t,"info",e)}},{key:"success",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._required("html"),e=arguments.length>1?arguments[1]:void 0;this.notify(t,"success",e)}},{key:"warning",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._required("html"),e=arguments.length>1?arguments[1]:void 0;this.notify(t,"warning",e)}},{key:"alert",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._required("html"),e=arguments.length>1?arguments[1]:void 0;this.notify(t,"alert",e)}},{key:"async",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._required("promise"),n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,a=this.notify(i,"async",r);return e.then(function(e){return t._runFunction(n,e,r,!1,a)},function(e){return Promise.reject(t._runFunction(o,e,r,!0,a))})}},{key:"notify",value:function(t,e,n,o){n=this.options.override(n),"alert"===e&&(t=n.formatError(t));var i=new k(t,e,n,this._getContainer());return i.fire(o),i}},{key:"confirm",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._required("html"),n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=this.modal(e,"confirm",i);r.addEvent("click",function(e){if("BUTTON"!==e.target.nodeName)return!1;switch(r.delete(),e.target.id){case l.ids.confirmOk:return t._runFunction(n,null,i);case l.ids.confirmCancel:return t._runFunction(o,null,i,!0)}})}},{key:"asyncBlock",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._required("promise"),n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,a=new x(i,"async-block",r),c=Date.now();return e.then(function(e){return a.hide(c).then(function(){return t._runFunction(n,e,r)})},function(e){return a.hide(c).then(function(){return Promise.reject(t._runFunction(o,e,r,!0))})})}},{key:"modal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._required("html"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._required("className"),n=arguments.length>2?arguments[2]:void 0;n=this.options.override(n);var o=new x(t,e,this.options);return o.addEvent("click",function(t){t.target.id===o.el.id&&o.delete()}),o}},{key:"_required",value:function(t){throw Error("'".concat(t,"' is mandatory parameter for this function"))}},{key:"_getContainer",value:function(){return this.container||(this.container=document.getElementById(s.ids.container)||this._createContainer()),this.container}},{key:"_createContainer",value:function(){var t=this.options.position.split("-"),e="top"===t[0]?"".concat(u.lib,"-top"):"";"left"===t[1]&&(e="".concat(e," ").concat(u.lib,"-left"));var n=new d(document.body,s.ids.container,e);return n.insert(),n.el}},{key:"_runFunction",value:function(t,e,n,o,i){if("function"==typeof t)return i&&i.delete(),t(param);var r=t||e,a=o?"alert":"success";return this.notify(r,a,n,i),e}}])&&P(e.prototype,n),o&&P(e,o),t}()}])});